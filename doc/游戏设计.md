
### 游戏玩法设计完成

#### 游戏流程与阶段

整个游戏过程由若干循环的阶段组成，从准备到战斗再到奖励，每个阶段都有特定的玩家操作和影响：

###### 1. **准备阶段（开局与队伍组建）**
- **初始队伍选择：** 在游戏开始时，玩家可以从若干初始角色中选择一名或多名英雄组成初始小队。每个英雄有独特的基础属性和初始技能。玩家需要考虑角色间的**协同**和**配合**来选择起始阵容。
- **初始资源获取：** 玩家在开局会获得一定的**魔晶**和基础技能卡牌。**魔晶**用于购物，技能卡用于战斗中使用或装备给英雄。
- **局外升级影响：** 如果玩家之前有过成长，在此阶段会体现在初始条件上（例如解锁新的初始卡牌、英雄或增加初始**魔晶**等，为本次冒险提供优势）。

*结果：完成准备阶段后，玩家进入地牢冒险，对接下来的关卡有所规划。初始队伍和资源的选择将影响整场游戏的发展。*

### 2. **探索与路线选择阶段**
- **关卡预览：** 地牢由分层关卡构成，每一层都有不同的遭遇（战斗、精英敌人、事件、商店、宝箱等）。类似于《杀戮尖塔》的地图，玩家在进入下一层之前可以预览可选的路线节点类型。
- **路线分支选择：** 玩家决定前进方向，选择下一个遭遇。可能的选项包括：
  - **普通战斗：** 难度适中，奖励一般。
  - **精英敌人：** 高风险高回报的战斗，敌人更强但胜利后奖励丰厚（如更多**魔晶**或稀有卡牌）。
  - **事件/谜题：** 随机事件，可能有对话抉择、小游戏或陷阱，带来奖励或代价。
  - **商店/补给点：** 一个特殊节点，可提前进行一次购物和整备。
  - **宝箱/补给：** 可直接获得奖励（如**魔晶**、道具）。
- **下定决心：** 一旦玩家选择了一条路线或遭遇，就**不可撤销**该决定，只能向前推进。这要求玩家在做选择时认真权衡队伍现状和风险收益。

*结果：玩家确定了前进方向后，进入该节点的具体流程。如果是战斗节点，则进入下一阶段的策略部署；如果是事件或商店等，则直接处理相应内容。*

### 3. **策略阶段（战斗准备与团队部署）**
在每次战斗开始前，玩家都有一个策略准备阶段，用于强化队伍和制定战术：
- **商店购买：** 在策略阶段，玩家可以进入当层的**商店**（或营地）购买强化**卡牌**：
  - **刷新商品：** 商店提供若干随机物品（技能卡牌、装备、甚至新的角色招募）。玩家可花费**魔晶****刷新**商品列表，获得新的随机选项。
  - **购买物品：** 玩家使用**魔晶**购买所需的卡牌或道具，将其添加到队伍。**技能卡**可以装备给特定英雄，赋予该英雄新的技能；**装备道具**可以提升角色属性或给全队提供被动效果。
  - **升级选项：** 玩家可以支付一定**魔晶****升级商店等级**或**道具**品质。升级商店等级后，后续刷新会出现更高品质的卡牌/道具（类似于酒馆战棋中提升酒馆等级）；某些道具或卡牌也可通过花费资源直接升级效果。
- **技能构筑：** 玩家通过购买和奖励获得**技能卡牌**，有策略的使用技能卡牌，让英雄获得更多成长。
- **“三连”合成升级（待定）：** 游戏引入**三连升级机制**：当玩家持有三张相同的技能卡时，可以将它们合成为一张更高等级的**高级技能卡**。合成后的高级卡牌具有更强威力或额外效果。此机制鼓励玩家在商店购买或保留重复卡牌，从而获取强力的升级技能（正如《酒馆战棋》中三张相同随从合成金色随从）。
- **决策锁定：** 在策略阶段所做出的所有决定（购买/出售卡牌、升级、使用卡牌等）一旦确认就**不可撤销**。比如卖出一个角色后无法反悔买回。这要求玩家小心规划经济和资源。做完所有调整后，玩家结束策略阶段进入战斗。

*结果：经过策略阶段，玩家的队伍获得了优化和调整。队员阵容、携带的技能卡和装备道具全部确定，锁定为本回合战斗配置。玩家不能再更改策略，只能让战斗自动进行。*

### 4. **战斗阶段（自动战斗）**
- **自动执行：** 进入战斗阶段后，敌我双方按照从上到下**自动执行战斗**。玩家不能直接干预战斗过程，只能从旁观战果。战斗采用**回合制**的自动演算：
  - 如果是回合制，按照速度或预定顺序，角色自动施放技能卡牌上的技能，敌人也自动行动。
- **技能触发：** 在战斗中，每个英雄会根据其装备的技能卡牌和AI策略自动使用技能。
- **属性与伤害计算：** 角色和敌人的战斗属性设计得**较为简单**且**规则清晰**，以便玩家可以预测战果：
  - **攻击力**：决定造成的伤害数值。
  - **生命值**：降为0则该角色/敌人死亡。
  - **防御/护甲**：（如果有）抵消部分伤害或者减少受到的伤害。
- **战斗结算：** 战斗持续到一方全灭或满足特定胜利条件。可能的结果：
  - **玩家胜利：** 全部敌人被击败。己方存活英雄进入下一阶段。如果有英雄阵亡，可能在后续阶段需要花费资源复活或该英雄永久失去（至少本次冒险中）。
  - **玩家失败：** 小队成员全部阵亡，则本次地牢探险宣告结束，进入游戏结束流程（结算奖励和进行Rogue-lite成长）。

*结果：战斗阶段自动展现了玩家策略的效果。如果胜利，玩家将进入奖励和进度阶段；如果失败，游戏本次运行结束。战斗中的表现（如损失的生命、使用的技能冷却等）会影响后续资源分配和队伍状态。*

### 5. **奖励与进度阶段（战后奖励）**
- **战利品掉落：** 每场战斗胜利后，玩家获得战利品奖励，包括：
  - **魔晶：** 用于后续**策略阶段**在商店购买/刷新/升级的主要货币。高风险战斗给予更多**魔晶**奖励。
  - **新卡牌：** 玩家通常可从几张随机的技能卡牌中选择一张添加到手牌。这让玩家逐步构筑更强的技能组合。如果击败的是精英敌人或Boss，可能提供**更高品质**的卡牌。
- **回复与整备：** 战后可能触发队伍回复机制。例如，每战斗后英雄可少量回复生命值，为下一战做准备。
- **三连奖励（待定）：** 如果战后奖励或之前商店购买使玩家获得第三张相同卡牌，则此时会**自动触发三连合成**，生成升级卡牌并腾出牌位。合成当下即可完成，使玩家在下阶段能使用新升级的卡牌。
- **继续冒险：** 处理完战利品后，如果地牢尚未探索完毕，玩家返回**路线选择阶段**/地图，以决定下一步冒险路线，进入下一循环的策略->战斗流程。

*结果：通过奖励阶段，玩家的队伍实力得到提升（获得新卡、**魔晶**、经验等）。这些成长资源为下一阶段的商店购买和战斗策略提供了更多选项，使得游戏逐步积累Rogue-lite的**成长感**。玩家接下来根据地牢地图继续前进，直到遇到Boss或选择结束。*

### 6. **Boss战与层进展**
- **层数推进：** 地牢可能分为若干层，每层末尾通常有一场**Boss战**。当玩家通过若干普通和精英战斗后，将面临该层的Boss。
- **Boss战特点：** Boss战难度较高，Boss敌人可能拥有特殊技能和机制，需要玩家提前针对性调整策略（例如更换特定抗性装备或带上特定控制技能）。Boss战胜利会给予丰厚奖励（大量**魔晶**、稀有技能卡），并解锁前往下一层地牢的入口。
- **下一层准备：** 击败Boss后，玩家进入下一层地牢之前通常会有一个**特殊准备阶段**或**营地**：
  - 可以在此**整理队伍**（类似常规战后奖励阶段，但可能提供额外全队治疗、免费卡牌移除或升级机会）。
- **重复流程：** 进入新一层地牢后，流程循环回**探索路线选择**->**策略阶段**->**战斗阶段**->**奖励阶段**继续进行，只是敌人更加强大。

*结果：玩家通过层层推进，不断强化，自身冒险深入地牢更深处。如果玩家能持续战胜每层Boss，则最终迎来游戏目标——最终关卡或最终Boss。*

### 7. **游戏结束与胜利条件**
- **胜利完成：** 游戏的胜利条件通常是**击败最终Boss**或者**通过全部地牢层数**。当玩家击败了最后一层的大Boss后，视为成功完成本次地牢探险。游戏会结算成绩，例如用时、得分、击败敌人数等，给予通关奖励。
- **失败结束：** 如果玩家的小队在战斗中全灭，则本次冒险以失败告终。玩家无法继续探索当前地牢，需要从头开始新的冒险。不过，死亡并非毫无收获（详见局外成长）。
- **主动结束：** 某些情况下玩家可以选择提前结束探险（例如达到某层后带着战利品撤退，或完成主要目标后返回城镇)。这也会触发结算，但未击败最终Boss可能成绩不如通关。

*结果：无论胜败，每次游戏运行都会结束，进入结算和奖励流程，并为Rogue-lite的长期成长提供基础。*

## 资源类型及管理

游戏中包含多种资源，玩家需要在冒险过程中合理获取和管理：

- **魔晶：** *主要的交易货币。* 用于在策略阶段的商店**购买**卡牌和道具，**刷新**商品列表，以及**升级**商店等级或装备。**魔晶**获取途径包括战斗胜利奖励、宝箱、事件中的奖励等。玩家需要平衡**魔晶**的花费：是立即强化当前实力，还是存储**魔晶**以待后面更好的商品。
- **技能卡牌：** *构筑战术的核心资源。* 每张卡牌代表一种角色技能或魔法，如攻击技能、防御技能、辅助增益等。卡牌可以通过商店购买或战斗后奖励获得。玩家能够给英雄装备这些技能卡，使其在战斗阶段自动使用。卡牌有品质或等级之分，高级卡牌威力更大。通过**三连机制**或特殊升级途径可以提升卡牌等级。
- **角色（英雄）**：*玩家可以招募和控制的单位。* 每位英雄有自身基础属性和可能的特殊能力。角色本身也被视为一种资源：玩家可以在特定事件或商店中**招募新英雄**加入队伍，或**升级英雄**（通过经验）。英雄在队伍中的数量可能超过上场上限，未上场的英雄相当于**替补**，可以在准备阶段调整轮换。保持一支多样化且互相配合的队伍是攻略不同敌人的关键。
- **局外货币（血石）：** *Rogue-lite的长期资源。* 每次冒险结束（无论胜败），玩家都会根据进度获得一定的局外特殊货币或点数。这种资源不能在当前冒险中使用，但可以在冒险之间于主菜单的**永久升级商店**消费，用于解锁内容或提升下次冒险的初始能力（例如解锁新角色、新技能卡牌加入掉落池、提升初始生命值上限等）。这种资源确保玩家即使失败也在宏观上有所推进。

## 阶段中的玩家行为与结果

在不同阶段，玩家可以执行不同操作，每种操作都会对游戏进程产生影响：

- **准备阶段：**
  - *选择初始角色：* 决定起始策略方向（例如选择高攻击低防的队伍意味着前期速攻但风险高）。
  - *应用局外升级：* 选择携带某个永久解锁的加成（如初始携带一件随机遗物）。结果是本次冒险的难易度基调和起步情况。
- **探索/路线阶段：**
  - *选择下一个节点：* 决定面对什么挑战和奖励。选择简单战斗意味着稳妥推进但成长较慢；选择精英敌人意味着如果胜利则加速成长但若失败则冒险结束。结果直接影响队伍实力提升速度和冒险长度。
  - *触发事件抉择：* 在事件节点，玩家可能选择花费生命/资源来换取奖励，或者保守处理以避免风险。结果可能增益（获得奖励）或损失（踩中陷阱损失生命或**魔晶**）。
- **策略阶段：**
  - *购买卡牌：* 提升队伍实力的主要手段。购买新卡可能开启新的战术套路，招募新英雄提供更多战斗位或替补深度。结果会消耗**魔晶**，但增强战力。
  - *刷新商店：* 花费**魔晶**换一批商品，以期望出现所需的卡牌或道具。结果是不一定获得收益，可能白花**魔晶**但增加了找到理想组件的机会。
  - *升级商店：* 投资**魔晶**来提高未来收益（更强物品选择）或立即强化现有物品。结果是后续战斗更轻松，但短期内因**魔晶**减少实力可能受影响，需要权衡当前与长远利益。
  - *卡牌合成（三连）（待定）：* 当条件满足时，将三个相同卡牌换成一个更强卡牌。结果是牌库精简且质量提高，但合成过程中减少了卡牌数量，需要确保过渡期战力不弱。
  - *最终决策锁定：* 确认所有操作，进入战斗。玩家承担所做决策的后果，不能反悔，比如如果此时队伍配置有缺陷将在战斗中暴露。
- **战斗阶段：**
  - *观察战况：* 玩家虽无法操作，但可以观察战斗过程，总结哪些策略有效、哪些角色表现突出或疲软。这为下一个策略阶段的调整提供依据。
  - *战斗中触发技能/物品：* 一些事先准备的**触发型道具**（如自动救援药水，当英雄濒死时自动使用）会在战斗中生效。玩家在之前阶段的布置在此得到验证。结果可能是惊险获胜或者付出代价（用掉了珍贵药水）。
  - *战斗胜负：* 胜利保留生者进入下一阶段，失败则游戏结束。部分英雄阵亡会影响后续战力安排。
- **奖励阶段：**
  - *挑选战利品：* 玩家通常需要从掉落奖励中**选择**，例如多张卡牌中选一张加入卡组。这是重要的战略选择：选错可能导致卡组杂乱无用，选对则增强配合。结果影响后面战斗的资源配置。
  - *使用/保存物品：* 针对获得的消耗品，玩家决定马上使用（比如立即治疗重伤队员）还是保存以备后战。结果影响队伍短期生存能力或长期资源储备。
- **Boss战特殊：**
  - *战前特别策略：* 面对Boss可以使用保存的强力消耗品或调整专门策略（如果知道Boss特点）。结果可能决定Boss战的成败。
  - *应对Boss技能：* 在战斗中观察Boss特殊机制，如召唤小怪或暴走阶段。虽然无法操作，但玩家前期准备的针对性策略将在此显现效果（如有无带打断技能应对Boss读条大招等）。结果直接关系能否通关当前层。
- **游戏结束阶段：**
  - *总结评价：* 游戏展示此次冒险的统计数据和评价评级（如击败敌人数、获得**魔晶**总数、用时、评分等），让玩家了解表现。
  - *领取局外奖励：* 根据通关层数或成绩，给予玩家一定的**局外成长货币**或解锁内容。胜利通关通常奖励最多，但即使中途失败也依据进度给一些基础奖励。结果是玩家在宏观上得到成长，解锁新内容。
  - *开始新冒险：* 玩家可以利用局外升级强化下次冒险的初始条件，然后重新开始游戏，再次经历准备阶段。这形成Rogue-lite的循环，不断挑战更高难度并体验新解锁的内容。

## 游戏完成与Rogue-lite成长

**游戏何时结束：** 一局游戏的结束标志取决于玩家是否达成最终目标：
- 达成目标：击败最终Boss或通关最后一层地牢，视为**完成游戏**。玩家赢得本次冒险的胜利。
- 未达目标：如果在途中全队阵亡，则本次冒险**提前结束**，以失败告终。

**Rogue-lite局外成长：** 无论游戏胜败，每次冒险结束后，玩家都会进行局外的成长，这使得游戏具有长期动力：
- **永久解锁：** 玩家可以使用冒险中获得的局外货币解锁新的内容，例如**新角色**（下次冒险可选的新英雄，拥有独特技能）、**新技能卡**（加入卡池，使后续游戏中可发现这些卡牌）、**道具插槽**（增加英雄可装备道具数量）等。解锁内容丰富游戏的多样性和策略空间。
- **初始强化：** 玩家还能花费局外资源购买永久的初始属性提升，如全队初始生命+10%、初始**魔晶**增加、开局携带一张随机稀有卡等。这样的升级让下一次探险略微容易，逐步推进玩家能挑战更深层的地牢。
- **难度解锁：** 通关游戏后，可以解锁更高难度等级或者新的地牢区域。更高难度下敌人更强但奖励和局外资源更多，供高水平玩家挑战，也延长游戏寿命。
- **循环挑战：** 由于每次地牢都是部分随机生成（敌人组合、事件和商店物品都会变化），再加上玩家不断解锁新元素，即使多次重复游戏也会有新鲜体验。Rogue-lite的**结构循环**鼓励玩家反复游玩，享受不断强化和攻略更高挑战的乐趣。

## 鼓励协作与策略深度

本游戏的设计核心在于**团队协作**和**策略深度**：
- **团队协作：** 玩家控制的不是单一角色，而是一整个冒险小队。各角色的技能和定位需要互相配合才能最大化效果。许多技能卡牌和道具的效果**作用于整个团队**，例如群体增益或配合技：某英雄的技能为全队提供护盾，另一英雄的技能对有护盾的队员产生追加效果。这种设计鼓励玩家打造一个互补的团队，而非单打独斗。
- **策略锁定与预判：** 玩家所有决策都在战前做出，一旦进入战斗将无法再修改。因此每个策略阶段玩家都面临**下定决心**的考验：战前的布置要尽可能周全，考虑各种可能的战斗情况。由于战斗属性简单清晰，玩家可以在战前**预判战果**并相对准确地评估策略可行性。这种预判结合**不可逆的决策**，提供了深度的思考挑战，也带来执行战术成功后的成就感。
- **高风险高回报决策：** 游戏允许且鼓励玩家有时选择**高风险高回报**的行动，例如挑战精英敌人、购买昂贵的关键卡牌致使手头拮据等。如果决策成功，团队实力将显著提升，但一旦失败也可能使局势恶化甚至导致游戏失败。这种**押注式**的策略选择增加了游戏的刺激感和重玩性。
- **易于上手，难于精通：** 虽然每次战斗的机制自动执行且属性简化，新手也能通过基本的组合打败敌人，但要走得更远，需要对资源管理、卡组构筑、团队搭配和敌人AI模式有深入理解。游戏在表层提供直观易懂的规则，在深层给予丰富的策略空间，适合反复钻研。

## 总结

这款地牢探险Rogue-lite自动战斗游戏通过**完整的阶段流程**（从准备、策略、战斗到奖励和路线选择）、多样的**资源体系**（**魔晶**、卡牌、经验、装备等）以及**明确的胜利/失败条件**为玩家呈现了一个结构清晰而深刻的挑战。自动战斗让玩家专注于战术规划，卡牌构筑和三连升级机制提供了丰富的成长线路，Rogue-lite的局外成长确保了长线目标和持续动力。玩家将在反复的冒险中体验**策略制定**与**团队协作**的乐趣，在不断的抉择与权衡中，一步步征服阴暗的地牢，收获通关的成就感。
